<div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="form-container">
          <div class="container-header text-center">
            <h1>Nouvelle tâche</h1>
          </div>
          <div class="card form-input">
            <%= simple_form_for @task do |f| %>
              <div class="form-group">
                <%= f.input :name, label: "Nom", input_html: { class: 'form-control' }, label_html: { class: 'form-label' } %>
              </div>
              <div class="form-group">
                <%= f.input :description, label: "Détails", input_html: { class: 'form-control' }, label_html: { class: 'form-label' } %>
              </div>

              <%= f.input :category,
                  as: :radio_buttons,
                  collection_wrapper_tag: 'div',
                  collection_wrapper_class: 'category-wrapper',
                  item_wrapper_class: 'category-item',
                  input_html: {class: 'category-selector'},
                  collection: Task::CATEGORIES %>

              <div class="form-group">
                <%= f.input :reccurence, label: "Réccurente", as: :boolean, input_html: { class: 'form-check-input' }, label_html: { class: 'form-check-label' } %>
              </div>
              <div class="form-group">
                <%= f.input :points, label: "Points", input_html: { class: 'form-control' }, label_html: { class: 'form-label' } %>
              </div>
              <p class="form-label">Membres</p>
              <div data-controller="member-selection">
                <% @members.each do |member| %>
                  <div class="member-photo" data-member-selection-target="photo" data-member-id="<%= member.id %>">
                    <%= image_tag(member.avatar, alt: member.first_name, style: "width:100px") %>
                    <%= f.simple_fields_for :task_managers, @task.task_managers.build do |tm| %>
                      <%= tm.hidden_field :user_id, value: member.id, data: { member_selection_target: "checkbox" } %>
                    <% end %>
                  </div>
                <% end %>
              </div>
                <%= f.input :deadline,
                            :label => "Sa date",
                            as: :string,
                            input_html: { data: { controller: "datepicker" }, class: 'form-control' },
                            label_html: { class: 'form-label' } %>

             <div class="form-group">
                <%= f.input :priority,
                  as: :check_boxes,
                  collection_wrapper_tag: 'div',
                  collection_wrapper_class: 'd-flex flex-wrap',
                  input_html: { class: "tag-selector" },
                  item_wrapper_class: 'tag-item',
                  collection: Task::PRIORITY %>

              </div>
            <div class="form-actions text-center my-4">
                <%= f.submit 'Ajoute la', class: 'btn btn-orange' %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
