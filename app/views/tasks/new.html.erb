<div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-sm-6 col-md-4">
        <div class="form-container" id="task-card">
          <div class="card-header text-center" id="card-title">
            <h1>New Task</h1>
          </div>
          <div class="card form-input" id="task-form">
            <%= simple_form_for @task do |f| %>
              <div class="form-group">
                <%= f.input :name, label: "Son nom", input_html: { class: 'form-control' }, label_html: { class: 'form-label' } %>
              </div>
              <div class="form-group">
                <%= f.input :description, label: "+ en détails", input_html: { class: 'form-control' }, label_html: { class: 'form-label' } %>
              </div>
              <div class="form-group">
                <%= f.input :category, label: "Sa catégorie", collection: Task::CATEGORIES, input_html: { class: 'form-control' }, label_html: { class: 'form-label' } %>
              </div>
              <div class="form-group">
                <%= f.input :reccurence, label: "Réccurence ?", as: :boolean, input_html: { class: 'form-check-input' }, label_html: { class: 'form-check-label' } %>
              </div>
              <div class="form-group">
                <%= f.input :points, label: "Ses points attribués", input_html: { class: 'form-control' }, label_html: { class: 'form-label' } %>
              </div>
                   <h3>Choisis les membres</h3>
              <div data-controller="member-selection">
                <%= f.label :members, "Membres" %>
                <% @members.each do |member| %>
                  <div class="form-check">
                    <%= check_box_tag 'task[members][]', member.id, false, id: "member_#{member.id}", class: 'form-check-input', style: 'display:none;', data: { member_selection_target: "checkbox" } %>
                    <div class="member-photo" data-member-selection-target="photo" data-member-id="<%= member.id %>" onclick="document.getElementById('member_<%= member.id %>').click()">
                      <%= image_tag(member.avatar, alt: member.first_name, style: "width:100px; cursor: pointer;") %>
                    </div>
                  </div>
                <% end %>
              </div>
              <div class="form-group">
                <%= f.input :deadline,
                            :label => "Sa date",
                            as: :string,
                            input_html: { data: { controller: "datepicker" }, class: 'form-control' },
                            label_html: { class: 'form-label' } %>
              </div>

             <div class="form-group">
                <%= f.input :priority_tag,  label: "Son niveau de priorité", collection: Task::PRIORITY, input_html: { class: 'form-control' }, label_html: { class: 'form-label' } %>
              </div>
              <div class="form-group">
                <%= f.submit 'Ajoute la', class: 'btn btn-purple' %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
